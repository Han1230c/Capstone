<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments :: head('Order Confirmation - Vintage Vinyl')}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&display=swap">
</head>
<body>
<nav th:replace="~{fragments :: navigation}"></nav>

<div class="container mt-5 vintage-container">
    <h1 class="vintage-title mb-4">Order Confirmation</h1>

    <div th:if="${order != null}">
        <h2 class="vintage-subtitle">Thank you for your order!</h2>
        <p class="vintage-text">Your order has been successfully placed and is being processed.</p>

        <h3 class="vintage-section-title">Order Details</h3>
        <table class="table table-bordered vintage-table">
            <tr>
                <th>Order ID:</th>
                <td th:text="${order.id}"></td>
            </tr>
            <tr>
                <th>Order Date:</th>
                <td th:text="${#dates.format(order.orderDate, 'yyyy-MM-dd HH:mm')}"></td>
            </tr>
            <tr>
                <th>Status:</th>
                <td th:text="${order.status}"></td>
            </tr>
            <tr>
                <th>Shipping Address:</th>
                <td th:text="${order.shippingAddress}"></td>
            </tr>
            <tr>
                <th>Payment Method:</th>
                <td th:text="${order.paymentMethod}"></td>
            </tr>
        </table>

        <h3 class="vintage-section-title">Order Items</h3>
        <table class="table table-striped vintage-table">
            <thead class="vintage-thead">
            <tr>
                <th>Record</th>
                <th>Artist</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Subtotal</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${order.items}">
                <td th:text="${item.record.title}"></td>
                <td th:text="${item.record.artist}"></td>
                <td th:text="${'$' + item.price}"></td>
                <td th:text="${item.quantity}"></td>
                <td th:text="${'$' + #numbers.formatDecimal(item.price * item.quantity, 1, 2)}"></td>
            </tr>
            </tbody>
        </table>

        <!-- Total price of the order -->
        <div class="text-right vintage-total">
            <h4>Total: $<span th:text="${#numbers.formatDecimal(order.total, 1, 2)}"></span></h4>
        </div>
    </div>

    <!-- Display message when no order is found -->
    <div th:if="${order == null}">
        <p class="vintage-text">Sorry, we couldn't find your order. Please contact customer support if you believe this is an error.</p>
    </div>

    <!-- Continue shopping button -->
    <a href="/records" class="btn btn-primary vintage-btn mt-3">Continue Shopping</a>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Custom Vintage CSS -->
<style>
    /* Vintage styling */
    body {
        font-family: 'Roboto Slab', serif;
        background-color: #faf4e5;
        color: #4a3c31;
    }

    .vintage-container {
        background-color: #f7efe3;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
    }

    .vintage-title {
        color: #4a3c31;
        font-weight: bold;
        font-size: 2.5rem;
        text-align: center;
    }

    .vintage-subtitle {
        color: #7b5b3e;
        font-weight: bold;
        font-size: 1.5rem;
    }

    .vintage-section-title {
        color: #6c5c54;
        font-weight: bold;
        margin-top: 20px;
    }

    .vintage-text {
        color: #6c5c54;
    }

    /* Table styling */
    .vintage-table th, .vintage-table td {
        border-color: #d1b894;
        padding: 0.75rem;
    }

    .vintage-thead {
        background-color: #d1b894;
        color: #3e2723;
        font-weight: bold;
    }

    /* Button styling */
    .vintage-btn {
        font-family: 'Roboto Slab', serif;
        background-color: #8b5e34;
        border-color: #8b5e34;
        color: #fff;
    }

    .vintage-btn:hover {
        background-color: #6d4c30;
        border-color: #6d4c30;
    }

    /* Total text styling */
    .vintage-total h4 {
        color: #4a3c31;
        font-weight: bold;
    }
</style>
</body>
</html>
